var licenseData,InputData={},checkoutActive={};function getRandomToken(){var t=new Uint8Array(32);crypto.getRandomValues(t);for(var a="",e=0;e<t.length;++e)a+=t[e].toString(16);return a}function getData(t,a=null){chrome.storage.local.get(a,function(a){t&&t(a)})}function setData(t,a){chrome.storage.local.set(t,()=>{a&&a()})}chrome.tabs.onUpdated.addListener((t,a,e)=>{"complete"===e.status&&a.hasOwnProperty("status")&&"complete"===a.status&&e.url.match(/^http(.*):\/\/(.*)adidas.com.my(.*)/)&&licenseData.status&&chrome.tabs.sendMessage(t,{action:"tabChanged",data:{tabId:t,InputData:InputData,isActive:checkoutActive[t]||!1}})}),chrome.storage.sync.get("userid",function(t){var a=t.userid;function e(t){getData(a=>{licenseData=validLicense(t,a.license)},"license")}a?e(a):(a=getRandomToken(),chrome.storage.sync.set({userid:a},function(){e(a)}))}),getData(t=>{t.hasOwnProperty("InputData")&&(InputData=t.InputData)},"InputData"),chrome.runtime.onMessage.addListener((t,a,e)=>{"getData"===t.action?e(InputData):"replaceAddress"===t.action?setData({InputData:InputData=t.data}):"autoCheckout"===t.action?checkoutActive[t.data.tabId]=!0:"stopAutofill"===t.action?checkoutActive[t.data.tabId]=!1:"getLicense"===t.action?e(licenseData):"saveLicense"===t.action&&saveLicense(t.data.license)});