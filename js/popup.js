var licenseData,InputData={};$(function(){function a(a,e,t="success"){e.html(`<p class="alert alert-${t}">${a}</p>`)}var e;function t(a,e){finder=$(document).find(a),finder.length&&(finder.val(e),finder.trigger("click").trigger("change"))}function s(a){return $(document).find(a).val()}$(".state").html((e=Object.keys(AllCities),stateDom='<option value=""></option>',e.forEach(a=>{stateDom+=`<option value='${a}'>${a}</option>`}),stateDom)),$(".month").html(function(a=""){dom='<option value="">Month</option>';for(let e=1;e<=12;e++)e<10&&(e="0"+e),dom+=`<option ${a==e?"selected":""} value="${e}">${e}</option>`;return dom}()),$(".year").html(function(a=""){let e=(new Date).getFullYear();dom='<option value="">Year</option>';for(let t=0;t<=20;t++){let s=e+t;dom+=`<option ${s==a?"selected":""} value="${s}"> ${s} </option>`}return dom}()),$(document).delegate(".state","change",function(){if(parent=$(this).closest("form"),state=$(this).val(),state){var a=Object.keys(AllCities[state]);cityDom='<option value=""></option>',a.forEach(a=>{cityDom+=`<option value='${a}'>${a}</option>`}),parent.find(".city").html(cityDom),parent.find(".postalCode").html("")}}),$(document).delegate(".city","change",function(){if(parent=$(this).closest("form"),state=parent.find(".state").val(),city=$(this).val(),state&&city){var a=AllCities[state][city];postalDom="",a.forEach(a=>{postalDom+=`<option value='${a}'>${a}</option>`}),parent.find(".postalCode").html(postalDom)}}),$(document).find("#addressForm").submit(function(e){e.preventDefault(),data={firstName:s(".firstName"),lastName:s(".lastName"),address1:s(".address1"),address2:s(".address2"),address3:s(".address3"),phoneNumber:s(".phoneNumber"),email:s(".email"),state:s(".state"),city:s(".city"),postalCode:s(".postalCode"),cardName:InputData.cardName||"",cardNumber:InputData.cardNumber||"",cvv:InputData.cvv||"",cardMonth:InputData.cardMonth||"",cardYear:InputData.cardYear||""},error="",!data.firstName.match(/^[a-zA-Z0-9\u0020]{1,}$/)||data.firstName.length<1||data.firstName.length>15?error="Please check First Name.":!data.lastName.match(/^[a-zA-Z0-9\u0020]{2,}$/)||data.lastName.length<1||data.lastName.length>15?error="Please check Last Name.":!data.address1.match(/^[a-zA-Z0-9\u0020\_\#\@\-\,\/\.]{1,}$/)||data.address1.length<2||data.address1.length>30?error="Please check Address 1.":!data.address2.match(/^[a-zA-Z0-9\u0020\_\#\@\-\,\/\.]{1,}$/)||data.address2.length<2||data.address2.length>30?error="Please check Address 2.":data.address3.length>30?error="Please check Address 3.":!data.phoneNumber.match(/^([0-9+]{1,1})(.*)$/)||data.phoneNumber.length<7||data.phoneNumber.length>20?error="Please check Phone Number.":!data.email.match(/^[^\s@.]+(\.[^\s@.]+)*@[A-Za-z\d]([\w\-]*([A-Za-z0-9]\.[A-Za-z0-9])*)*([A-Za-z0-9]\.[A-Za-z]{2,})$/)||data.email.length<1?error="Please check Email.":null===data.state||""===data.state?error="Please check State.":null===data.city||""===data.city?error="Please check City.":null!==data.postalCode&&""!==data.postalCode||(error="Please check Postal Code."),messageDom=$(document).find(".billingMessage"),""!==error?a(error,messageDom,"danger"):(chrome.runtime.sendMessage({action:"replaceAddress",data:data}),InputData=data,a("Data has been saved.",messageDom))}),$(document).find("#cardDetailsForm").submit(function(e){var t;e.preventDefault(),data={firstName:InputData.firstName||"",lastName:InputData.lastName||"",address1:InputData.address1||"",address2:InputData.address2||"",address3:InputData.address3||"",phoneNumber:InputData.phoneNumber||"",email:InputData.email||"",state:InputData.state||"",city:InputData.city||"",postalCode:InputData.postalCode||"",cardName:s(".cardName"),cardNumber:s(".cardNumber").replace(/\D/g,""),cvv:s(".cvv"),cardMonth:s(".cardMonth"),cardYear:s(".cardYear")},error="",(!data.cardName.match(/^[^0-9`!@#$%\^&\*\(\)=\+\[\]\\\{\}:;?\/<>]{4,40}$/)||data.cardName.length<4||data.cardName.length>50)&&(error="Please check Card Name."),""===data.cardNumber||isNaN(data.cardNumber)||data.cardNumber.length<15||data.cardNumber.length>16||!((t=data.cardNumber).match(/^3[47]\d{13,14}$/)||(t.match(/^(6541|6556)[0-9]{12}$/)||(t.match(/^389[0-9]{11}$/)||(t.match(/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/)||(t.match(/^65[4-9][0-9]{13}|64[4-9][0-9]{13}|6011[0-9]{12}|(622(?:12[6-9]|1[3-9][0-9]|[2-8][0-9][0-9]|9[01][0-9]|92[0-5])[0-9]{10})$/)||(t.match(/^63[7-9][0-9]{13}$/)||(t.match(/^(?:2131|1800|35\d{3})\d{11}$/)||(t.match(/^(6304|6706|6709|6771)[0-9]{12,15}$/)||(t.match(/^(5018|5020|5038|6304|6759|6761|6763)[0-9]{8,15}$/)||(t.match(/^5[1-5][0-9]{14}$/)||(t.match(/^(6334|6767)[0-9]{12}|(6334|6767)[0-9]{14}|(6334|6767)[0-9]{15}$/)||(t.match(/^(4903|4905|4911|4936|6333|6759)[0-9]{12}|(4903|4905|4911|4936|6333|6759)[0-9]{14}|(4903|4905|4911|4936|6333|6759)[0-9]{15}|564182[0-9]{10}|564182[0-9]{12}|564182[0-9]{13}|633110[0-9]{10}|633110[0-9]{12}|633110[0-9]{13}$/)||(t.match(/^(62[0-9]{14,17})$/)||(t.match(/^4[0-9]{12}(?:[0-9]{3})?$/)||t.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/)))))))))))))))?error="Please enter valid card.":""===data.cardMonth||isNaN(data.cardMonth)||data.cardMonth<1||data.cardMonth>31||2!==data.cardMonth.length?error="Please enter valid month of 2 length.":""===data.cardYear||isNaN(data.cardYear)||4!==data.cardYear.length?error="Please enter valid year":(""===data.cvv||isNaN(data.cvv)||data.cvv.length<3||data.cvv.length>4)&&(error="Please enter valid CVV."),messageDom=$(document).find(".cardMessage"),""!==error?a(error,messageDom,"danger"):(chrome.runtime.sendMessage({action:"replaceAddress",data:data}),InputData=data,a("Data has been saved.",messageDom))}),$(document).find("#licenseForm").submit(function(e){e.preventDefault(),license=s(".license"),licenseStatus=validLicense(licenseData.uid,license),licenseMessageDom=$(document).find(".licenseMessage"),a(licenseStatus.message,licenseMessageDom,licenseStatus.status?"success":"danger"),licenseStatus.status&&chrome.runtime.sendMessage({action:"saveLicense",data:{license:license}})}),chrome.runtime.sendMessage({action:"getData"},a=>{InputData=a,t(".firstName",a.firstName),t(".lastName",a.lastName),t(".address1",a.address1),t(".address2",a.address2),t(".address3",a.address3),t(".phoneNumber",a.phoneNumber),t(".email",a.email),t(".state",a.state),t(".city",a.city),t(".postalCode",a.postalCode),t(".cardName",a.cardName),t(".cardNumber",a.cardNumber),t(".month",a.cardMonth),t(".year",a.cardYear),t(".cvv",a.cvv)}),chrome.runtime.sendMessage({action:"getLicense"},e=>{licenseData=e,licenseMessageDom=$(document).find(".licenseMessage"),a(e.message,licenseMessageDom,e.status?"info":"warning"),t(".uid",e.uid)})});